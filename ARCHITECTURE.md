# åˆ†å±‚æ¨¡å—åŒ–æ¶æ„è¯´æ˜

## æ¶æ„è®¾è®¡

æœ¬é¡¹ç›®é‡‡ç”¨**ç»å…¸çš„åˆ†å±‚æ¶æ„æ¨¡å¼**ï¼Œå°†åº”ç”¨åˆ†ä¸ºå››ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰æ˜ç¡®çš„èŒè´£å’Œè¾¹ç•Œã€‚

## æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   demo-web (Webå±‚)                   â”‚
â”‚  - Controller (HTTPè¯·æ±‚å¤„ç†)                         â”‚
â”‚  - å¯åŠ¨ç±»                                             â”‚
â”‚  - ç«¯å£: 8080                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ ä¾èµ–
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                demo-service (ä¸šåŠ¡å±‚)                 â”‚
â”‚  - Service æ¥å£å®ç°                                  â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘å¤„ç†                                       â”‚
â”‚  - Entity (é¢†åŸŸæ¨¡å‹)                                 â”‚
â”‚  - DTO â†” Entity è½¬æ¢                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ ä¾èµ–
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 demo-api (æ¥å£å®šä¹‰å±‚)                â”‚
â”‚  - Service æ¥å£å®šä¹‰                                  â”‚
â”‚  - DTO (æ•°æ®ä¼ è¾“å¯¹è±¡)                                â”‚
â”‚  - VO (è§†å›¾å¯¹è±¡)                                     â”‚
â”‚  - Result<T> (ç»Ÿä¸€å“åº”)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ ä¾èµ–
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                demo-common (å…¬å…±å±‚)                  â”‚
â”‚  - å·¥å…·ç±» (Util)                                     â”‚
â”‚  - å¸¸é‡ (Constant)                                   â”‚
â”‚  - å¼‚å¸¸ (Exception)                                  â”‚
â”‚  - æ—  Spring ä¾èµ–                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ¨¡å—è¯¦è§£

### demo-commonï¼ˆå…¬å…±åŸºç¡€æ¨¡å—ï¼‰

**å®šä½**: æœ€åº•å±‚çš„å·¥å…·æ¨¡å—

**ç‰¹ç‚¹**:
- âœ… æ—  Spring ä¾èµ–ï¼Œçº¯ Java å®ç°
- âœ… æ— ä¸šåŠ¡é€»è¾‘
- âœ… å¯è¢«ä»»ä½•é¡¹ç›®å¤ç”¨
- âœ… ä½“ç§¯å°ï¼ŒåŠ è½½å¿«

**åŒ…å«å†…å®¹**:
```
com.example.common
â”œâ”€â”€ constant/
â”‚   â””â”€â”€ CommonConstant.java        # å…¬å…±å¸¸é‡
â”œâ”€â”€ exception/
â”‚   â””â”€â”€ BusinessException.java     # ä¸šåŠ¡å¼‚å¸¸
â””â”€â”€ util/
    â””â”€â”€ StringUtil.java            # å­—ç¬¦ä¸²å·¥å…·
```

**ä½¿ç”¨åœºæ™¯**:
- å·¥å…·æ–¹æ³•è°ƒç”¨
- å¸¸é‡å¼•ç”¨
- å¼‚å¸¸æŠ›å‡º

**ç¤ºä¾‹**:
```java
// ä½¿ç”¨å·¥å…·ç±»
if (StringUtil.isEmpty(username)) {
    throw new BusinessException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
}

// ä½¿ç”¨å¸¸é‡
int code = CommonConstant.SUCCESS_CODE;
```

---

### demo-apiï¼ˆæ¥å£å®šä¹‰æ¨¡å—ï¼‰

**å®šä½**: æ¥å£å¥‘çº¦å±‚

**ç‰¹ç‚¹**:
- âœ… åªå®šä¹‰æ¥å£ï¼Œä¸åŒ…å«å®ç°
- âœ… å®šä¹‰æ•°æ®ä¼ è¾“æ ¼å¼ï¼ˆDTOï¼‰
- âœ… é¢å‘æ¥å£ç¼–ç¨‹
- âœ… å¯ä½œä¸ºå®¢æˆ·ç«¯ SDK

**åŒ…å«å†…å®¹**:
```
com.example.api
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ Result.java               # ç»Ÿä¸€å“åº”å°è£…
â”‚   â””â”€â”€ UserDTO.java              # ç”¨æˆ·DTO
â”œâ”€â”€ vo/
â”‚   â””â”€â”€ (è§†å›¾å¯¹è±¡)
â””â”€â”€ service/
    â””â”€â”€ UserService.java          # ç”¨æˆ·æœåŠ¡æ¥å£
```

**è®¾è®¡åŸåˆ™**:
- **æ¥å£éš”ç¦»**: æ¯ä¸ªæ¥å£èŒè´£å•ä¸€
- **ä¾èµ–å€’ç½®**: ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- **å¼€é—­åŸåˆ™**: å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­

**ç¤ºä¾‹**:
```java
// å®šä¹‰æ¥å£
public interface UserService {
    UserDTO getUserById(Long id);
    List<UserDTO> getAllUsers();
}

// å®šä¹‰ DTO
@Data
public class UserDTO {
    private Long id;
    private String username;
    private String email;
}
```

---

### demo-serviceï¼ˆä¸šåŠ¡æœåŠ¡æ¨¡å—ï¼‰

**å®šä½**: ä¸šåŠ¡é€»è¾‘å±‚

**ç‰¹ç‚¹**:
- âœ… å®ç° API æ¨¡å—ä¸­çš„æ¥å£
- âœ… åŒ…å«æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- âœ… å®šä¹‰é¢†åŸŸæ¨¡å‹ï¼ˆEntityï¼‰
- âœ… ä¸ä¾èµ– Web æŠ€æœ¯

**åŒ…å«å†…å®¹**:
```
com.example.service
â”œâ”€â”€ entity/
â”‚   â””â”€â”€ User.java                 # ç”¨æˆ·å®ä½“ï¼ˆé¢†åŸŸæ¨¡å‹ï¼‰
â””â”€â”€ impl/
    â””â”€â”€ UserServiceImpl.java      # ç”¨æˆ·æœåŠ¡å®ç°
```

**èŒè´£**:
1. **ä¸šåŠ¡é€»è¾‘å¤„ç†**: æ•°æ®éªŒè¯ã€ä¸šåŠ¡è§„åˆ™
2. **æ•°æ®è®¿é—®**: ä¸æ•°æ®åº“/ç¼“å­˜äº¤äº’
3. **DTO è½¬æ¢**: Entity â†” DTO è½¬æ¢
4. **äº‹åŠ¡ç®¡ç†**: ä½¿ç”¨ @Transactional

**ç¤ºä¾‹**:
```java
@Service
public class UserServiceImpl implements UserService {
    
    @Override
    public UserDTO getUserById(Long id) {
        User user = userStore.get(id);
        return entityToDTO(user);  // Entity è½¬ DTO
    }
    
    private UserDTO entityToDTO(User user) {
        return new UserDTO(user.getId(), user.getUsername(), ...);
    }
}
```

**ä¸ºä»€ä¹ˆéœ€è¦ Entity å’Œ DTO åˆ†ç¦»ï¼Ÿ**
- Entity: é¢å‘æ•°æ®åº“ï¼ŒåŒ…å«æŒä¹…åŒ–æ³¨è§£
- DTO: é¢å‘ä¼ è¾“ï¼Œè½»é‡çº§ï¼ŒåªåŒ…å«å¿…è¦å­—æ®µ
- é¿å…æ•°æ®åº“ç»“æ„ç›´æ¥æš´éœ²ç»™å¤–éƒ¨

---

### demo-webï¼ˆWeb è¡¨ç°å±‚ï¼‰

**å®šä½**: HTTP è¯·æ±‚å¤„ç†å±‚

**ç‰¹ç‚¹**:
- âœ… å”¯ä¸€å¯æ‰§è¡Œçš„æ¨¡å—
- âœ… Controller å¤„ç† HTTP è¯·æ±‚
- âœ… å¯åŠ¨ç±»åœ¨æ­¤æ¨¡å—
- âœ… ä¾èµ–æ‰€æœ‰ä¸‹å±‚æ¨¡å—

**åŒ…å«å†…å®¹**:
```
com.example.web
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ UserController.java       # ç”¨æˆ·æ§åˆ¶å™¨
â””â”€â”€ DemoWebApplication.java       # å¯åŠ¨ç±»
```

**èŒè´£**:
1. **HTTP è¯·æ±‚å¤„ç†**: æ¥æ”¶å’Œå“åº” HTTP è¯·æ±‚
2. **å‚æ•°éªŒè¯**: éªŒè¯è¯·æ±‚å‚æ•°
3. **å¼‚å¸¸å¤„ç†**: ç»Ÿä¸€å¼‚å¸¸å¤„ç†
4. **å“åº”å°è£…**: è¿”å›ç»Ÿä¸€æ ¼å¼

**ç¤ºä¾‹**:
```java
@RestController
@RequestMapping("/user")
public class UserController {
    
    @Autowired
    private UserService userService;  // ä¾èµ–æ¥å£
    
    @GetMapping("/list")
    public Result<List<UserDTO>> getAllUsers() {
        List<UserDTO> users = userService.getAllUsers();
        return Result.success(users);
    }
}
```

## æ•°æ®æµè½¬

### è¯·æ±‚æµç¨‹
```
HTTPè¯·æ±‚
    â†“
Controller (Webå±‚)
    â†“
Serviceæ¥å£è°ƒç”¨ (APIå±‚å®šä¹‰)
    â†“
ServiceImplå®ç° (Serviceå±‚)
    â†“
Entityæ“ä½œ (Serviceå±‚)
    â†“
DTOè½¬æ¢
    â†“
è¿”å›DTO (APIå±‚)
    â†“
Resultå°è£… (APIå±‚)
    â†“
HTTPå“åº”
```

### ç¤ºä¾‹ï¼šè·å–ç”¨æˆ·

```
1. å®¢æˆ·ç«¯: GET /user/1
2. UserController.getUserById(1)
3. userService.getUserById(1)        // è°ƒç”¨æ¥å£
4. UserServiceImpl.getUserById(1)    // æ‰§è¡Œå®ç°
5. User entity = userStore.get(1)    // è·å–Entity
6. UserDTO dto = entityToDTO(entity) // è½¬æ¢ä¸ºDTO
7. Result.success(dto)               // å°è£…å“åº”
8. è¿”å› JSON: {"code":200,"message":"success","data":{...}}
```

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```java
// æµ‹è¯• Common å±‚
@Test
void testStringUtil() {
    assertTrue(StringUtil.isEmpty(""));
}

// æµ‹è¯• Service å±‚ï¼ˆæ— éœ€å¯åŠ¨å®¹å™¨ï¼‰
@Test
void testUserService() {
    UserService service = new UserServiceImpl();
    UserDTO user = service.getUserById(1L);
    assertNotNull(user);
}

// æµ‹è¯• Web å±‚
@SpringBootTest
@AutoConfigureMockMvc
class UserControllerTest {
    @Autowired
    private MockMvc mockMvc;
    
    @Test
    void testGetUser() throws Exception {
        mockMvc.perform(get("/user/1"))
               .andExpect(status().isOk());
    }
}
```

## åç»­æ¼”è¿›

### 1. å¾®æœåŠ¡åŒ–
```
demo-common    â†’ å…¬å…± SDK
demo-api       â†’ æœåŠ¡å¥‘çº¦
demo-service   â†’ ç”¨æˆ·æœåŠ¡
demo-web       â†’ API ç½‘å…³ / å¦ä¸€ä¸ªæœåŠ¡çš„ Web å±‚
```

### 2. é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰
```
demo-common    â†’ åŸºç¡€è®¾æ–½å±‚
demo-api       â†’ åº”ç”¨å±‚æ¥å£
demo-service   â†’ é¢†åŸŸå±‚ + åº”ç”¨å±‚å®ç°
demo-web       â†’ æ¥å£å±‚
```

### 3. é›†æˆæ›´å¤šæŠ€æœ¯

**æ•°æ®å±‚**:
- MyBatis / JPA
- MySQL / PostgreSQL
- Redis ç¼“å­˜

**å®‰å…¨å±‚**:
- Spring Security
- JWT è®¤è¯

**æ–‡æ¡£å±‚**:
- Knife4j / Swagger
- API è‡ªåŠ¨æ–‡æ¡£

**ç›‘æ§å±‚**:
- Spring Boot Actuator
- Prometheus + Grafana

## æ€§èƒ½ä¼˜åŒ–

1. **ç¼–è¯‘æ€§èƒ½**: æ¨¡å—åŒ–åå¯å¹¶è¡Œç¼–è¯‘
2. **éƒ¨ç½²çµæ´»**: åªéƒ¨ç½²å˜æ›´çš„æ¨¡å—
3. **ä¾èµ–ç®¡ç†**: é¿å…ä¾èµ–å†—ä½™
4. **èŒè´£åˆ†ç¦»**: æ˜“äºæ€§èƒ½è°ƒä¼˜

## æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**æ ‡å‡†çš„åˆ†å±‚æ¨¡å—åŒ–æ¶æ„**ï¼š

| å±‚æ¬¡ | æ¨¡å— | èŒè´£ | ä¾èµ– |
|------|------|------|------|
| å…¬å…±å±‚ | demo-common | å·¥å…·ã€å¸¸é‡ | æ—  |
| æ¥å£å±‚ | demo-api | æ¥å£å®šä¹‰ã€DTO | common |
| ä¸šåŠ¡å±‚ | demo-service | ä¸šåŠ¡å®ç°ã€Entity | api |
| è¡¨ç°å±‚ | demo-web | Controllerã€å¯åŠ¨ç±» | service |

**æ¶æ„ä¼˜åŠ¿**:
- ğŸ¯ èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
- ğŸ”„ æ¾è€¦åˆï¼Œæ˜“äºæ‰©å±•
- ğŸ§ª å¯æµ‹è¯•æ€§å¼º
- ğŸš€ å¯é‡ç”¨æ€§é«˜
- ğŸ“¦ ä¾¿äºæ¨¡å—åŒ–éƒ¨ç½²

é€‚åˆä½œä¸ºä¼ä¸šçº§åº”ç”¨çš„æ ‡å‡†æ¶æ„æ¨¡æ¿ï¼
